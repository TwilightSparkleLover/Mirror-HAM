<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HAM Documentation</title>
<link href="hamdoc.css" rel="stylesheet" type="text/css">
</head><body>



<table width=100% border=0 cellpadding=0 cellspacing=0
  bgcolor=#FFFFFF><tr><td width=154 align=left><a
  href="http://www.ngine.de"><img src="head-left.jpg"
  border="0"></a></td><td background="head-mid.jpg"
  border="0">&nbsp;</td><td width=177 align=right><a
  href="http://www.ngine.de"><img src="head-right.jpg"
  border="0"></a><img src="head-rightest.jpg"
  border="0"></td></tr></table> <table width=100% align=center><td
  align="center" height="20" width="90%" bgcolor=#eeeeee><font
  class="topnav"><B>
<A href="http://www.ngine.de/index.php" class="topnav">Home</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Downloads" class="topnav">Downloads</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Your_Account" class="topnav">Your
  Account</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Submit_News" class="topnav">Submit News</a>
</B></font>
</td>
</tr>
</table>

  <table width=100% border=0>
  <tr>
  <td align=left>
  <font face=verdana size=+0>
  <a href="index.html">Documentation Homepage</a><br>
  <a href="modules.html">HAMLib reference</a><br>
  <a href="http://www.ngine.de/index.html">Back to HAM Homepage</a><br>
  </td>
  <td align=right>
  <a href=index.html><img border=0 align=right src=hamlogo.jpg></a>
  </td>
  </tr>
  </table>  
  <br clear=all><hr>
<!-- Generated by Doxygen 1.2.18 -->
<h1>tUME Map Support Functions</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>u32&nbsp;</td><td valign=bottom><a class="el" href="group__hamlib__tume.html#a0">ham_InitTume</a> (TUMERIC_ROOT *tum_root)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize the HAMlib tUME support system.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>u32&nbsp;</td><td valign=bottom><a class="el" href="group__hamlib__tume.html#a1">ham_InitTumeRoom</a> (u32 room_id)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize a tUME Room for use in HAMlib.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__hamlib__tume.html#a2">ham_InitTumeLayer</a> (u32 room_id, u32 layer_id, u8 bgno, u32 prio, u32 worldx, u32 worldy)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize a tUME Layer for Display.</em> <a href="#a2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__hamlib__tume.html#a3">ham_MoveTumeLayer</a> (u8 bgno, s32 worldx, s32 worldy)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Moves a tUME Layer on Screen.</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<b>Important</b> Note: tUME support in HAMlib is currently in <b>alpha</b> state. There are several known issues with it,  in particular when multiple Layers from multiple Rooms are used and individually scrolled. Please do currently not email me about bugs in this module - I will improve it as time comes.
<p>
About the tUME Support: This feature of HAMlib allows you to directly use Maps generated by tUME - the Universal Map Editor. tUME already comes bundled with the Windows releases of HAM, and can be found in your Start Menu. Please make sure that you have thouroughly watched the tUME demos before you start working with the  tool -- it is well worth your time.
<p>
Implementation: You will need to edit your projects makefile, and add two lines: <div class="fragment"><pre>  USE_TUME = yes
  TUME_FILES = directory/of/choice/some.TUM
</pre></div>  This will cause HAM (at every recompile of your project) to look for the file you specified,  and attempt to convert the tUME map into a suitable format for HAMs tUME support system. Then, a  really simple program using this map might look like this:
<p>
<div class="fragment"><pre><span class="preprocessor">#include &lt;mygba.h&gt;</span>
<span class="preprocessor">#include "tumemap/LVL1.h"</span>

u8  g_NewFrame=TRUE;
<span class="keywordtype">int</span> worldx=0;
<span class="keywordtype">int</span> worldy=0;

<span class="keywordtype">void</span> vblFunc(<span class="keywordtype">void</span>);

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{

    ham_Init();
    <a class="code" href="group__hamlib__pad.html#a1">ham_InitPad</a>();
    
    <span class="comment">// Initialize the tUME Map support in HAM, specifying the tUME Map to use</span>
    <a class="code" href="group__hamlib__tume.html#a0">ham_InitTume</a>((TUMERIC_ROOT*)&amp;LVL1_ROOT);
    <span class="comment">// Initialize a Room of your choice (which loads the tiles for the room)</span>
    <a class="code" href="group__hamlib__tume.html#a1">ham_InitTumeRoom</a>(0);
    <span class="comment">// Initialize a Layer in that Room (which created the BG and displays it)</span>
    <a class="code" href="group__hamlib__tume.html#a2">ham_InitTumeLayer</a>(0,0,0,0,worldx,worldy);

    <span class="comment">// start a Vertical Blank Interrupt</span>
    <a class="code" href="group__hamlib__int.html#a0">ham_StartIntHandler</a>(INT_TYPE_VBL,         <span class="comment">// The Interrupts ID you want to start.</span>
                        (<span class="keywordtype">void</span> *)&amp;vblFunc);    <span class="comment">// The adress of a function that should be called when the interrupt is fired</span>

    <span class="comment">// Loop</span>
    <span class="keywordflow">while</span>(TRUE)
    {
        <span class="comment">// It's a new frame?</span>
        <span class="keywordflow">if</span>(g_NewFrame)
        {
            <span class="keywordflow">if</span>(Pad.Held.Right)
                worldx+=8;
            <span class="keywordflow">if</span>(Pad.Held.Left)
                worldx-=8;
            <span class="keywordflow">if</span>(Pad.Held.Up)
                worldy-=8;
            <span class="keywordflow">if</span>(Pad.Held.Down)
                worldy+=8;

            <span class="comment">// Frames isn't new anymore</span>
            g_NewFrame=FALSE;
        }
    }
    <span class="keywordflow">return</span> 0;
}

<span class="keywordtype">void</span> vblFunc(<span class="keywordtype">void</span>)
{
    <span class="comment">//check for button presses</span>
    <a class="code" href="group__hamlib__pad.html#a3">ham_UpdatePad</a>();
    <span class="comment">//move the tUME layer</span>
    <a class="code" href="group__hamlib__tume.html#a3">ham_MoveTumeLayer</a>(0,worldx,worldy);
    <span class="comment">//signify a new frame</span>
    g_NewFrame=TRUE;
}
</pre></div>
<p>
There is a source code example that you can also have a look at in samples/tumesimple <hr><h2>Function Documentation</h2>
<a name="a0" doxytag="tume.c::ham_InitTume"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> u32 ham_InitTume </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TUMERIC_ROOT *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>tum_root</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the HAMlib tUME support system.
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>tum_root</em>&nbsp;</td><td>
A pointer to the TUMERIC root data structure created by tumeric</td></tr>
</table>
</dl>This function will initialize the HAMlib tUME support system. It will coexist with existing BG's, but this subsystem will only be able to allocate previously unused BGs using this system.
<p>
ATTENTION: the tUME subsystem currently ONLY works with non-rotation BGs
<p>
LIMITATION: "only" 65535 tUME rooms are supported in the HAM tUME support system.
<p>
Return value: This function currently always returns Zero - this is reserved for future expansion.
<p>
See also: <a class="el" href="group__hamlib__bg.html#a0">ham_InitBg()</a> <a class="el" href="group__hamlib__tile.html#a9">ham_InitMapSet()</a> <a class="el" href="group__hamlib__tile.html#a3">ham_InitTileSet()</a>     </td>
  </tr>
</table>
<a name="a2" doxytag="tume.c::ham_InitTumeLayer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ham_InitTumeLayer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>room_id</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>layer_id</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>bgno</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>prio</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>worldx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>worldy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a tUME Layer for Display.
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>room_id</em>&nbsp;</td><td>
a tUME room ID (first room = 0, second room = 1 etc), see <a class="el" href="group__hamlib__tume.html#a1">ham_InitTumeRoom()</a> </td></tr>
<tr><td valign=top><em>layer_id</em>&nbsp;</td><td>
a tUME layer ID (0..n) as defined in the tUME editor </td></tr>
<tr><td valign=top><em>bgno</em>&nbsp;</td><td>
the BG number (0-3) you want to display this layer on. Note the BG must not be allocated by a HAM Tileset/Mapset set up by <a class="el" href="group__hamlib__bg.html#a0">ham_InitBg()</a> ! </td></tr>
<tr><td valign=top><em>prio</em>&nbsp;</td><td>
the BGs priority against other BGs (0-3). See also <a class="el" href="group__hamlib__bg.html#a0">ham_InitBg()</a> </td></tr>
<tr><td valign=top><em>worldx</em>&nbsp;</td><td>
the world x coordinate on the layer that you want to scroll to </td></tr>
<tr><td valign=top><em>worldy</em>&nbsp;</td><td>
the world y coordinate on the layer that you want to scroll to</td></tr>
</table>
</dl>This function will attempt to load the map of a Layer in
<p>
See also:     </td>
  </tr>
</table>
<a name="a1" doxytag="tume.c::ham_InitTumeRoom"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> u32 ham_InitTumeRoom </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>room_id</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a tUME Room for use in HAMlib.
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>room_id</em>&nbsp;</td><td>
the desired tUME room ID (first room = 0, second room = 1 etc) as defined in the tUME editor</td></tr>
</table>
</dl>Initializes a tUME room for use in HAMlib. It is important to know that a room can consist of any number of layers. These layers can not only hold display information, but also serve as collision detection / other level data. For that reason, each Layer in the HAMlib tUME support must be switched on/off separately, using <a class="el" href="group__hamlib__tume.html#a2">ham_InitTumeLayer()</a>
<p>
This function will also automatically load the palette dedicated to this room. Please take note of this, especially if you previously set up BG data using a different palette.
<p>
See also: <a class="el" href="group__hamlib__bg.html#a0">ham_InitBg()</a> <a class="el" href="group__hamlib__tume.html#a0">ham_InitTume()</a> <a class="el" href="group__hamlib__tume.html#a2">ham_InitTumeLayer()</a>     </td>
  </tr>
</table>
<a name="a3" doxytag="tume.c::ham_MoveTumeLayer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ham_MoveTumeLayer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>bgno</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>s32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>worldx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>s32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>worldy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Moves a tUME Layer on Screen.
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>bgno</em>&nbsp;</td><td>
the BGno to move -- you should have previously assigned a specific tUME Layer to that BGno. </td></tr>
<tr><td valign=top><em>worldx</em>&nbsp;</td><td>
the world x coordinate on the layer that you want to scroll to </td></tr>
<tr><td valign=top><em>worldy</em>&nbsp;</td><td>
the world y coordinate on the layer that you want to scroll to</td></tr>
</table>
</dl><dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="group__hamlib__tume.html#a2">ham_InitTumeLayer()</a> </dl>    </td>
  </tr>
</table>
  <br clear=all><hr>
  <font face=verdana size=+0>
  <a href="index.html">Documentation Homepage</a> | 
  <a href="modules.html">HAMLib reference</a> | 
  <a href="http://www.ngine.de/index.html">Back to HAM Homepage</a><br>
  <div align=right>
  <font size=-1>documentation created with <a href="http://www.doxygen.org">Doxygen</a>
  </body>
</html>
